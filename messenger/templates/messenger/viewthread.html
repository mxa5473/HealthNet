{% include "navbar.html" %}

{% block content %}
    <title>Healthnet</title>

    <body style="background-color: whitesmoke">


    <div class="container-fluid col-md-6 col-md-offset-3">
        <h3 class="text-center" style="color: white; background-color: #772953; border-radius: 10px;
            padding-top: 1%; padding-bottom: 1%;">
            {{ thread.subject }}</h3>




        {% ifequal messages|length 0 %}
            This thread has no messages
        {% else %}
            <div class="container-fluid" style="overflow-y: scroll; height: 50vh;">
                <div class="grid">
                    {% for message in messages %}
                        <div class="row">
                            <div class="col-md-3">{{ message.datetime }}</div>

                            {% if message.author == user %}

                                <div class="col-md-9">
                                    <h5 style="color: blue;">{{ message.author }}</h5>
                                    <div>{{ message.text }}</div>
                                </div>

                            {% else %}
                                <div class="col-md-9">
                                    <h5 style="color: orange;">{{ message.author }}</h5>
                                    <div>{{ message.text }}</div>
                                </div>
                            {% endif %}


                        </div>
                        <hr style="border-color: black;">

                    {% endfor %}
                </div>

            </div>
        {% endifequal %}

        <div class="container-fluid col-md-8 col-md-offset-2">

            <form method="POST" action='' enctype="multipart/form-data">
                {% csrf_token %}

                <table>
                    {% for field in form %}
                        <div> New Message</div>
                        <div zstyle="width: 100%;">{{ field }}</div>

                        {% if field.errors %}
                            {% for error in field.errors %}
                                <strong style="color: red">{{ error|escape }}</strong>
                            {% endfor %}

                            {% for error in field.non_field_errors %}
                                <strong style="color: red">{{ error|escape }}</strong>
                            {% endfor %}

                        {% endif %}

                    {% endfor %}

                </table>

                <input type="submit" style="margin-top:1%; float: left;" class="btn btn-success"
                       value="Send Message"/>

            </form>

            <a href="/deletethread/{{ thread.id }}">
                <button class="btn btn-danger btn-toolbar"
                        style="margin-left: 12%; margin-top: 1%;">Delete Thread
                </button>
            </a>
            <a href="/patientedit">
            <button class="btn btn-default btn-toolbar float-right" style="margin-top: 1%;margin-left: 1%;">Back
            </button>
        </a>


        </div>

    </div>


    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/js/bootstrap.min.js"></script>

    <script>
        $(document).ready(function () {
            $(".nav li").removeClass("active");
            $('#messenger').addClass('active');
        });


    </script>

    </body>


{% endblock %}